# Ruby-SDL3 : SDL3 wrapper for Ruby
#
# * https://github.com/vaiorabbit/sdl3-bindings
#
# [NOTICE] Autogenerated. Do not edit.

require 'ffi'

module SDL
  extend FFI::Library
  # Define/Macro

  MS_PER_SECOND = 1000
  US_PER_SECOND = 1000000
  NS_PER_SECOND = 1000000000
  NS_PER_MS = 1000000
  NS_PER_US = 1000

  # Enum


  # Typedef

  typedef :uint, :SDL_TimerID
  callback :SDL_TimerCallback, [:pointer, :uint, :uint], :uint
  callback :SDL_NSTimerCallback, [:pointer, :uint, :ulong_long], :ulong_long

  # Struct


  # Function

  def self.setup_timer_symbols(output_error = false)
    symbols = [
      :SDL_GetTicks,
      :SDL_GetTicksNS,
      :SDL_GetPerformanceCounter,
      :SDL_GetPerformanceFrequency,
      :SDL_Delay,
      :SDL_DelayNS,
      :SDL_DelayPrecise,
      :SDL_AddTimer,
      :SDL_AddTimerNS,
      :SDL_RemoveTimer,
    ]
    apis = {
      :SDL_GetTicks => :GetTicks,
      :SDL_GetTicksNS => :GetTicksNS,
      :SDL_GetPerformanceCounter => :GetPerformanceCounter,
      :SDL_GetPerformanceFrequency => :GetPerformanceFrequency,
      :SDL_Delay => :Delay,
      :SDL_DelayNS => :DelayNS,
      :SDL_DelayPrecise => :DelayPrecise,
      :SDL_AddTimer => :AddTimer,
      :SDL_AddTimerNS => :AddTimerNS,
      :SDL_RemoveTimer => :RemoveTimer,
    }
    args = {
      :SDL_GetTicks => [],
      :SDL_GetTicksNS => [],
      :SDL_GetPerformanceCounter => [],
      :SDL_GetPerformanceFrequency => [],
      :SDL_Delay => [:uint],
      :SDL_DelayNS => [:ulong_long],
      :SDL_DelayPrecise => [:ulong_long],
      :SDL_AddTimer => [:uint, :SDL_TimerCallback, :pointer],
      :SDL_AddTimerNS => [:ulong_long, :SDL_NSTimerCallback, :pointer],
      :SDL_RemoveTimer => [:uint],
    }
    retvals = {
      :SDL_GetTicks => :ulong_long,
      :SDL_GetTicksNS => :ulong_long,
      :SDL_GetPerformanceCounter => :ulong_long,
      :SDL_GetPerformanceFrequency => :ulong_long,
      :SDL_Delay => :void,
      :SDL_DelayNS => :void,
      :SDL_DelayPrecise => :void,
      :SDL_AddTimer => :uint,
      :SDL_AddTimerNS => :uint,
      :SDL_RemoveTimer => :bool,
    }
    symbols.each do |sym|
      begin
        attach_function apis[sym], sym, args[sym], retvals[sym]
      rescue FFI::NotFoundError => error
        $stderr.puts("[Warning] Failed to import #{sym} (#{error}).") if output_error
      end
    end
  end

end

